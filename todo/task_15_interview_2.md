# ТЗ №2 — Интеграция GPT в режим «Интервью»

## 1. Цель

Добавить **GPT-оценку ответов пользователя** в режиме «Интервью» с безопасным хранением секретов и минимальным backend.

---

## 2. Архитектура (обязательно)

```
Frontend (GitHub Pages)
        ↓
Serverless API (Python)
        ↓
OpenAI API
```

❗ Прямые запросы к GPT из браузера **ЗАПРЕЩЕНЫ**

---

## 3. Backend

### 3.1 Тип

* Serverless Function (рекомендуется):

  * Vercel
  * Netlify
  * Cloudflare
* Язык: **Python**

---

### 3.2 Хранение секретов

* API-ключ GPT хранится:

  * в **ENV-переменных платформы**
* В коде фронта ключ **НЕ фигурирует**

---

## 4. API-контракт

### Endpoint

```
POST /api/interview
```

### Входные данные

```json
{
  "question": "...",
  "expected_answer": "...",
  "user_answer": "..."
}
```

---

### Ответ API

```json
{
  "score": 7,
  "feedback": "Ответ в целом верный, но не раскрыта тема X."
}
```

---

## 5. Промпт (backend only)

* Формируется **только на сервере**
* Пример логики (не текст):

  * роль: интервьюер
  * шкала 1–10
  * краткий конструктивный фидбек
* Промпт не хранится на фронте

---

## 6. Изменения на фронте

### Поведение «Отправить»

* После нажатия:

  * отправка запроса в backend
  * состояние **«Проверка…»**
* После ответа API:

  * отображается:

    * оценка (1–10)
    * текстовый фидбек
  * эталонный ответ остаётся доступным

---

## 7. Ограничения

* ❌ Не хранить историю запросов
* ❌ Не логировать ответы пользователей
* ❌ Не хранить ключи в GitHub
* ❌ Не использовать WebSockets

---

## 8. Критерии приёмки

* Ключ GPT не виден на фронте
* Запросы работают стабильно
* UI корректно обрабатывает задержки
* Оценка и фидбек отображаются
* Ошибки API обрабатываются аккуратно


